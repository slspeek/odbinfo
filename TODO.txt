make run a bit broken, as graph.svg is emptied on purpose

put preprocessing code into Visitors for Form, SubForm, Control, and Grid
check the console out put for indentation faults

Code clean up
--------------
- Preprocessable type for stuff that needs preprocessing

processor copy_token unittest

Makefile run after 'source env.source'

Add control 'visible' attribute

dependencysearch should be called from core not processor
metadata_tables.graphs = generate_graphs(metadata_tables, config)
    for module in metadata_tables.module_defs():
        _link_name_tokens(module)
Module should probably hide its Tokens in children No!

get 'incorrect type' check in pycharm to work for all

base: get_identifier smells
builder: convert_local should not hang if gohugo command fails

writer
  - test write_config with StringIO
  - prepare content output dirs (for parallelism)
  test/pure/test_writer.py

SubForm reading should respect order of subforms and controls
FormItem = Union[SubForm, Control, ListBox, Grid]
Grid type hack?

Testing
-------
? pip install pylint-unittest(https://pypi.org/project/pylint-testcode-plugin/)
Replace test that test nothing, by meaningfull unit tests
unit test coverage 90% (now 84.54%)

test/pure/test_sql_parser.py
test/pure/test_writer_make_site.py
test/pure/test_processor.py
test/pure/test_basic_parser_slow.py
test/pure/test_writer_regression.py
test/pure/test_scanner.py
test/pure/test_basic_parser.py

test_basic_parser_slow.py: parametrize and regression
make e2e test (BaseDocumenter2dot example)
a test for _convert_local, verify there are no more
localhost:1313 references


Document the technical design:
Elaborate module doc strings
- reading stage
- preprocessing
- dependency search
- graphs generation
- writing
- building

Relevant function filter
- function that is used by something else than a basicfunction
- function that uses something else than a basicfunction
- everthing 'in between' the above (hard to determine)

Uses should become a multiset, multiselect sources on mouseover link
https://pypi.org/project/multiset/
UsedBy should become multiset, multiselect when linking back
e.g. /#301,450,900 or /?select=300,304,600

templates:
- control in graph
- column in graph
- basic color highlighting
  - BasicToken color_highlight method
  - IDENTIFIER
  - COMMENTS
- sql color highlighting
  - all via cls attribute in BasicToken, no comparison of types in templates anymore
    (token-text.html STRINGLITERAL = 172 from OOBasicLexer)
    to_dict should exclude type attribute
  - columnnames

type file based MetaData, TextDocument
- functionality to include the file with downloadable link (if configurated so)

database (driver) information retrieval

Makefile: cleanup minimal before distribution

More of pathlib instead of os.path

Configuration
-------------
start with config.xcs, config.xcu and programmatically write and read them
See BaseDocumenter config too

GUI
---
- Settings dialog
- Progress dialog
- print --> logger.info
  logging window (sfriederichs.github.io/how-to/python/gui/logging/2017/12/21/Python-GUI-Logging.html)

installation check
- UI and suggestions

better description of the extension

Pre release
-----------
Try on windows

update minimal theme (20210703 ok)

make upgrade dependencies (20210813 done)

#################################################################################
############################## release 0.1 ######################################
#################################################################################
Later
-----
Introduce <ContentType>Raw classes make them member of <ContentType> classes
as they are preprocessed

Demonstration database Herbarium
- Species, Genus, Family, Order, Class, Phylum, Kingdom, Domain,
  Attributes, Observations, Locations
  Edibility (pfaf.org)
  Macros that open browser on interesting Plant sites

Generate graph legend

Extra graphs: (and link all these graphs)
  - for table, queries, Views
  - for basicfunction, library, module
  - WebPage object with direct uses and used_bies, and all_objects (respecting excludes)
bypass wget --convert-links with a rewrite in python of public/
- level 0 strip leading /
- level 1 strip leading /, add ../
- level 2 strip leading /, add ../../

Use LibYAML with pyyaml (on linux?)
caching of query parsing
- https://docs.python.org/3.7/library/shelve.html

direct sql queries must be transformed to Query object
Threads: writer, parser?
https://docs.python.org/3.7/library/multiprocessing.html
i18n gettext in python, hugo {{ T id }}
make typing more complete (lot of work)
errors in parser need improvement
Clean up files after make_site if no config.keepfiles is specified
field are done last as they are nice to have
datafield-referer class as super for Control, QueryColumn, DatabaseDisplay (Report field)
python in python (nice to have)
others in python (nice to have)

templates:
- look into GoHugo submenus
- Form: controls linked to sun API docs.

?make it work for .oxt files too?

look at Identifier construction at dependency.py:85
- just use obj_id

Limitations
-----------
Dialogs, Toolbars, Toolbarcontrols are omitted
Macro recursive calls are not considered
Controls more specific, eg Button...
IsCurrency Column omitted
Catalog excluded
KeyColumns, IndexColumns not used fully

Decided not to
--------------
Consider making a recursive call down the children with the containing webpage, setting it in a field of Node
(then remove all the parent stuff) NO! Because parent is used in the graph extensively

all_objects, by_content_type --> Iterator
search_combinations makes lists first

graph: look at strict parameter of Digraph for collapse_multiple_uses configuration
parameter

Idea: Metadata get basicfunction field and module field
refs in library and module to basicfunctions become links (Identifier)
solves some strange action in writer, clearing the way for
parallel writing

- _convert_local should use python webserver: (hugo localserving is very convenient)
  https://docs.python.org/3.7/library/http.server.html
    -serve_forever
    -shutdown --> .socket.close()












